(function(){this.Courseware=function(){function Courseware(){Courseware.prefix=$("meta[name='path_prefix']").attr("content"),new Navigation,Logger.bind(),this.render()}return Courseware.prefix="",Courseware.start=function(){return new Courseware},Courseware.prototype.render=function(){return XBlock.initializeBlocks($(".course-content")),$(".course-content .histogram").each(function(){var histg,id;id=$(this).attr("id").replace(/histogram_/,"");try{histg=new Histogram(id,$(this).data("histogram"))}catch(error){histg=error,"undefined"!=typeof console&&null!==console&&console.log(error)}return histg})},Courseware}()}).call(this),function(){this.Histogram=function(){function Histogram(id,rawData){this.id=id,this.rawData=rawData,this.xTicks=[],this.yTicks=[],this.data=[],this.calculate(),this.render()}return Histogram.prototype.calculate=function(){var count,log_count,score,_i,_len,_ref,_ref1,_results;for(_ref=this.rawData,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)_ref1=_ref[_i],score=_ref1[0],count=_ref1[1],null!==score&&(log_count=Math.log(count+1),this.data.push([score,log_count]),this.xTicks.push([score,score.toString()]),_results.push(this.yTicks.push([log_count,count.toString()])));return _results},Histogram.prototype.render=function(){return $.plot($("#histogram_"+this.id),[{data:this.data,bars:{show:!0,align:"center",lineWidth:0,fill:1},color:"#b72121"}],{xaxis:{min:-1,max:Math.max.apply(Math,$.map(this.xTicks,function(data){return data[0]+1})),ticks:this.xTicks,tickLength:0},yaxis:{min:0,max:Math.max.apply(Math,$.map(this.yTicks,function(data){return 1.1*data[0]})),ticks:this.yTicks,labelWidth:50}})},Histogram}()}.call(this),function(){this.Navigation=function(){function Navigation(){var active;$("#accordion").length&&(active=$("#accordion ul:has(li.active)").index("#accordion ul"),0>active&&(active=$("#accordion h3.active").index("#accordion h3")),0>active&&(active=0),$("#accordion").bind("accordionchange",this.log).accordion({active:active,header:"h3",autoHeight:!1,heightStyle:"content"}),$("#accordion .ui-state-active").closest(".chapter").addClass("is-open"),$("#open_close_accordion a").click(this.toggle),$("#accordion").show(),$("#accordion a").click(this.setChapter))}return Navigation.prototype.log=function(event,ui){return Logger.log("accordion",{newheader:ui.newHeader.text(),oldheader:ui.oldHeader.text()})},Navigation.prototype.toggle=function(){return $(".course-wrapper").toggleClass("closed")},Navigation.prototype.setChapter=function(){return $("#accordion .is-open").removeClass("is-open"),$(this).closest(".chapter").addClass("is-open")},Navigation}()}.call(this),$(document).ajaxError(function(event,jXHR){if(403===jXHR.status&&"Unauthenticated"===jXHR.responseText){var message=gettext("You have been logged out of your edX account. Click Okay to log in again now. Click Cancel to stay on this page (you must log in again to save your work).");if(window.confirm(message)){var currentLocation=window.location.href;window.location.href="/accounts/login?next="+currentLocation}}}),function(){this.Tab=function(){function Tab(id,items){var _this=this;this.id=id,this.items=items,this.onShow=function(){return Tab.prototype.onShow.apply(_this,arguments)},this.el=$("#tab_"+id),this.render()}return Tab.prototype.$=function(selector){return $(selector,this.el)},Tab.prototype.render=function(){var _this=this;return $.each(this.items,function(index,item){var tab;return tab=$("<a>").attr({href:"#"+_this.tabId(index)}).html(item.title),_this.$(".navigation").append($("<li>").append(tab)),_this.el.append($("<section>").attr({id:_this.tabId(index)}))}),this.el.tabs({show:this.onShow})},Tab.prototype.onShow=function(element,ui){return this.$("section.ui-tabs-hide").html(""),this.$("#"+this.tabId(ui.index)).html(this.items[ui.index].content),this.el.trigger("contentChanged")},Tab.prototype.tabId=function(index){return"tab-"+this.id+"-"+index},Tab}()}.call(this);